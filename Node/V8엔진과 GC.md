# node ì—”ì§„ ê´€ë ¨

# V8 ì—”ì§„ì´ë€?

- c++ ë¡œ ê°œë°œëœ Googleì˜ Js ë° WebAssembly ê¸°ë°˜ ì˜¤í”ˆì†ŒìŠ¤ ì—”ì§„
- `JIT` (just-in-time comepilation) ì„ ì‚¬ìš©í•´ JS ì½”ë“œë¥¼ ì‹¤í–‰
    - ì¦‰, JS ì½”ë“œë¥¼ ì»´íŒŒì¼í•˜ê³  ì‹¤í–‰í•˜ëŠ” ì—”ì§„ì´ë©° Chrome ë° Node.jsì—ì„œ ì‚¬ìš©ë¨
- V8ì—”ì§„ì€ ì¸í„°í”„ë¦¿ ë°©ì‹ì„ ì±„íƒí•˜ì˜€ë‹¤.

## ì»´íŒŒì¼(Complie)ê³¼ ì¸í„°í”„ë¦¿(Interpret)

| **êµ¬ë¶„** | **ì¸í„°í”„ë¦¿(Interpret)** | **ì»´íŒŒì¼(Compile)** |
| --- | --- | --- |
| ë²ˆì—­ | í•œ ì¤„ì”© ë²ˆì—­ í›„ ì‹¤í–‰ | ì „ì²´ë¥¼ ë²ˆì—­ í•œ ë²ˆì— ì‹¤í–‰ |
| ì¥ì  | ì½”ë“œ ì „ì²´ê°€ ì»´íŒŒì¼ ëœ Compilationì´ ì™„ì„  ë˜ëŠ” ê²ƒì„ ê¸°ë‹¤ë¦´ í•„ìš” ì—†ì´
`í•œ ì¤„ í•œ ì¤„ ë³€í™˜`í•˜ê¸° ë•Œë¬¸ì— `ì‹¤í–‰ ì†ë„ê°€ ë¹ ë¥´ë‹¤` | ì»´íŒŒì¼ëŸ¬ëŠ” `ì‘ì—…ì„ ë‹¨ìˆœí™”`ì‹œí‚¤ë¯€ë¡œ íš¨ìœ¨ì ì¸ ì‹¤í–‰ ì½”ë“œê°€ ìƒì„±ëœë‹¤.
(Optimizion ë¶ˆí•„ìš”í•œ ë™ì‘ì„ ì œê±°í•˜ëŠ” ì»´íŒŒì¼ëŸ¬ ë°©ì‹ì„ ìµœì í™”)
ex) íŠ¹ì • í•¨ìˆ˜ë¥¼ 10ì–µ ë²ˆ ë°˜ë³µí•´ì•¼ í•  ê²½ìš°,
í•¨ìˆ˜ë¥¼ ë°˜ë³µí•˜ì§€ ì•Šê³  ê²°ê³¼ë¬¼ì„ ë°˜ë³µí•˜ë„ë¡ ì»´íŒŒì¼í•œë‹¤. |
| ë‹¨ì  | ì‹¤í–‰ì‹œì— ì¸í„°í”„ë¦¬í„°ê°€ í•­ìƒ í•„ìš”í•¨ | ê¸°ê³„ì–´ì— ì¢…ì†ì ì¸ ì‹¤í–‰ì½”ë“œê°€ ìƒì„±ë˜ë¯€ë¡œ ì‹¤í–‰ ê¸°ê³„ê°€ ë‹¬ë¼ì§€ë©´ ìƒˆë¡œ ì»´íŒŒì¼í•´ì•¼ í•œë‹¤. |
| ì–¸ì–´ | Node.js, Python ë“± | C, C++, JAVA ë“± |
- ì§§ì€ ì½”ë“œë¼ë©´ Interpret ë°©ì‹ì´ ì¢‹ê² ì§€ë§Œ ëŒ€ê·œëª¨ì˜ ê²½ìš° JAVAì™€ ê°™ì´ ì»´íŒŒì¼í•˜ì—¬ ê°œë°œí•´ì•¼ í•˜ëŠ” ê²Œ ì•„ë‹Œê°€ë¼ëŠ” ì˜ë¬¸ì´ ë“¤ ìˆ˜ ìˆë‹¤.
- ê·¸ë ‡ë‹¤ë©´ JITê°€ ì–´ë–»ê²Œ í¼í¬ë¨¼ìŠ¤ë¥¼ ë‚¼ ìˆ˜ ìˆì„ê¹Œ
    
    â‡’ `Code Caching` ì´ë¼ëŠ” ê¸°ìˆ  ë•ë¶„ì´ë‹¤
    
    ---
    

## V8 ì—”ì§„ Flow

![V8 ì—”ì§„ Flow](./images/image%200.png)

V8 ì—”ì§„ Flow

1. `JavaScript Source Code`
    - ì‚¬ìš©ìê°€ JavaScript ì½”ë“œ ì‘ì„±í•˜ê³  ì‹¤í–‰
2. `Parser`
    - AST(Abstract Syntax Tree)
    
    ![image.png](./images/image%201.png)
    
    - Parserì—ì„œ JavaScript Source Codeë¥¼ ë¶„ì„ (Lexical Analysis ê³¼ì •)ì„ ê±°ì¹˜ê³  ASTë¡œ ë³€í™˜í•¨
3. `Ignition Interpreter`
    - ASTë¥¼ BypeCodeë¡œ ë³€í™˜í•¨
    - ì²˜ìŒì—ëŠ” ByteCodeë¡œ ë³€í™”í•˜ëŠ” ê³¼ì •ì—ì„œ ë§ì€ ì‹œê°„ì´ ì†Œìš”ë  ìˆ˜ ìˆìœ¼ë‚˜ ì¶”í›„ ì»´íŒŒì¼ì— ê°€ê¹Œìš´ ì„±ëŠ¥ì„ ë³´ì¸ë‹¤
    - ì›ë³¸ ì†ŒìŠ¤ì½”ë“œë³´ë‹¤ ì»´í“¨í„°ê°€ í•´ì„í•˜ê¸° ì‰¬ìš´ ë°”ì´íŠ¸ì½”ë“œë¡œ ë³€í™˜í•¨ìœ¼ë¡œì„œ ì›ë³¸ì½”ë“œë¥¼ ë‹¤ì‹œ íŒŒì‹±í•´ì•¼ í•˜ëŠ” ìˆ˜ê³ ë¥¼ ëœê³ 
    - ì½”ë“œì˜ ì–‘ë„ ì¤„ì´ë©´ì„œ ì½”ë“œë¥¼ ì‹¤í–‰í•  ë•Œ ì°¨ì§€í•˜ëŠ” ë©”ëª¨ë¦¬ ê³µê°„ì„ ì•„ë¼ëŠ” ì¥ì ì´ ìˆë‹¤.

![image.png](./images/image%202.png)

1. `Complier TurboFan`
    - ByteCodeë¥¼ ì‹¤í–‰í•˜ë¯€ëŸ¬ì„œ ì‹¤ì œ ìš°ë¦¬ì˜ ì½”ë“œê°€ ì‘ë™í•˜ê²Œ ë˜ê³ 
    - ê·¸ ì¤‘ ìì£¼ ì‚¬ìš©ë˜ëŠ” ì½”ë“œëŠ” TurboFanìœ¼ë¡œ ë³´ë‚´ì ¸ì„œ Optimized Machine Code ì¦‰, ìµœì í™”ëœ ì½”ë“œë¡œ ë‹¤ì‹œ ì»´íŒŒì¼ëœë‹¤.
    - ProfilerëŠ” ìµœì í™”ê°€ ê°€ëŠ¥í•œ ë¶€ë¶„ì„ ì°¾ì•„ì„œ ê¸°ë¡í•´ë‘”ë‹¤.
    - JIT Compilerë¥¼ í†µí•´ ì—”ì§„ì€ ë” ë¹ ë¥´ê²Œ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ìµœì í™” í”¼ë“œë°± ë°ì´í„°ì™€ í•¨ê»˜ ì»´íŒŒì¼ëŸ¬ë¡œ ë³´ë‚¸ë‹¤
    - ì–´ë–¤ ì‹œì ì—ì„œ ê°€ì • ì¤‘ í•˜ë‚˜ê°€ ì˜ëª» ëœ ê²ƒìœ¼ë¡œ íŒëª…ë˜ê±°ë‚˜ ì‚¬ìš©ì´ ëœëœë‹¤ ì‹¶ìœ¼ë©´ `Deoptimizing`í•œë‹¤.
    - ìµœì í™” ì»´íŒŒì¼ëŸ¬ëŠ” ìµœì í™” í•´ì œí•˜ê³  Interpretë¡œ ëŒì•„ê°„ë‹¤.

## ìš”ì•½

- `Interpreter ë°©ì‹`ìœ¼ë¡œ ì»´íŒŒì¼í•˜ê³  ì´ë¥¼ `ByteCodeë¡œ ë§Œë“ `ë‹¤
- Compile ì†ë„ë¥¼ ë†’ì´ê¸° ìœ„í•´ `ìì£¼ ì“°ì´ëŠ” ByteCode`ë¥¼ `ì¸ë¼ì¸ ìºì‹±`(inline caching)ê³¼ ê°™ì€ ìµœì í™” ê¸°ë²•ìœ¼ë¡œ `ìµœì í™”`í•œë‹¤.
- ì´ëŸ° ë°©ì‹ì„ `JIT`(Just-In-Time) Compiler ì´ë¼ê³  í•˜ë©° Interpreterì˜ `ëŠë¦° ì‹¤í–‰ ì†ë„ë¥¼ ê°œì„ í•˜ëŠ” ì—”ì§„ì˜ í•µì‹¬`ì´ë‹¤
    - `JIT`ëŠ” OSì— êµ¬ì• ë°›ì§€ ì•Šê³  ì»´íŒŒì¼ëŸ¬ì— ì¸í„°í”„ë¦¬í„°ê°€ ë“¤ì–´ê°€ ì†ë„ê°€ ë¹ ë¥´ë‹¤
- Chromeì€ ë™ì¼í•œ ìŠ¤í¬ë¦½íŠ¸ê°€ ë©°ì¹  ë‚´ì— ë‘ ë²ˆ ì´ìƒ í‘œì‹œë˜ëŠ” ê²½ìš°ì—ë§Œ ìºì‹œ ë°ì´í„°ë¥¼ ìƒì„±í•˜ë„ë¡ ê°œë°œí•˜ì˜€ê³ 
ê²°ê³¼ì ìœ¼ë¡œ Chromeì€ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ì‹¤í–‰ ê°€ëŠ¥í•œ ì½”ë“œë¡œ í‰ê·  2ë°° ë¹ ë¥´ê²Œ ë³€í™˜í•  ìˆ˜ ìˆì–´ì„œ
ì‚¬ìš©ìë“¤ì´ ì§€ê¸ˆê³¼ ê°™ì´ ë¹ ë¥¸ ì†ë„ë¡ ì´ìš©ì´ ê°€ëŠ¥í•˜ë‹¤

# Gargabe Collection

- V8ì—”ì§„ì—ì„œ Code Cachingì´ í•µì‹¬ ê¸°ìˆ ì´ë‹¤ 
ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì–´ë–¤ ê³¼ì •ì„ ê±°ì¹˜ëŠ”ì§€ê°€ ì œì¼ ì¤‘ìš”í•˜ë‹¤
ì¡°ê¸ˆ ë” ìì„¸íˆ ì•Œì•„ë³´ì

## V8ì˜ ì—­í• 

1. JavaScript ì†ŒìŠ¤ ì½”ë“œë¥¼ ì»´íŒŒì¼ ë° ì‹¤í–‰
2. í™ ë©”ëª¨ë¦¬ ê°ì²´ì— ëŒ€í•œ ë©”ëª¨ë¦¬ í• ë‹¹
3. `Garbage Collection`
4. ì½œìŠ¤íƒ í•¸ë“¤ë§

---

- ìœ„ì˜ ì—­í•  ì¤‘ GCê°€ V8ì˜ í•µì‹¬ ê¸°ëŠ¥ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤
- GCëŠ” ì£¼ê¸°ì ìœ¼ë¡œ ì‘ì—…ì´ ì™„ë£Œëœ ê°ì²´ ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ì—¬ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë©”ëª¨ë¦¬ë¡œ ì „í™˜í•˜ëŠ” ì—­í• ì„ í•œë‹¤.ã…‡

## ì•„í‚¤í…ì²˜ì˜ ë³€í™”

2015ë…„ ê³µì‹ í™ˆí˜ì´ì§€ì—ì„œ ì†Œê°œ ë˜ì—ˆë˜ ì•„í‚¤í…ì²˜ê°€ v8 5.0 ì—”ì§„ìœ¼ë¡œ ê³ ë„í™”ë˜ë©´ì„œ í° ë³€í™”ê°€ ìƒê²¼ë‹¤.

ê·¸ ì½”ë“œ ë„¤ì„ì„ `Orinoco`ë¼ê³  ì •ì˜ í–ˆê³  í•µì‹¬ì ì¸ ë¶€ë¶„ì€ `ë©”ëª¨ë¦¬ ì˜ì—­ì„ ë‘ ê°€ì§€ ì„¸ê·¸ë¨¼íŠ¸ë¡œ ë¶„ë¦¬í–ˆë‹¤`

- New space : Young generation
- Old space : Old generation

ê·¸ë¦¼2ì—ì„œ ê·¸ë¦¼3 ë°©ì‹ìœ¼ë¡œ í¬ì¸í„° ì—…ë°ì´íŠ¸ ë°©ì‹ êµ¬ì¡°ê°€ ë³‘ë ¬ í˜•íƒœë¡œ ë³€ê²½ ë˜ì—ˆëŠ”ë°
ì•„ë˜ì˜ êµ¬ì¡°ë¥¼ ë³´ë©´ ì˜¤ë¸Œì íŠ¸ê°€ í™ì—ì„œ ì´ë™ë  ë•Œ ê°ì²´ê°„ì˜ í¬ì¸í„°ë¥¼ ëª¨ë‘ ìˆœì°¨ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•´ì£¼ì–´ì•¼ í–ˆë‹¤.

![image.png](./images/image%203.png)

![image.png](./images/image%204.png)

ê·¸ëŸ¬ë‹¤ë³´ë‹ˆ ë²„ë²…ê±°ë¦¬ëŠ” ë¬¸ì œë“¤ì´ ë§ì´ ë°œìƒí–ˆë‹¤. ê·¸ëŸ¬ë‹¤ë³´ë‹ˆ V8ì˜ Orinocoì—ì„œëŠ” 3ê°€ì§€ ìµœì í™” ë°©ë²•ì„ ë„ì…í–ˆë‹¤

### 1. heap memory page ë¶„ë¦¬

1ì°¨ì ìœ¼ë¡œ `heap memory`ë¼ê³  ë¶ˆë¦¬ëŠ” ê³ ì • ì‚¬ì´ì¦ˆ ë©ì–´ë¦¬ë¡œ ë¶„í• í•œë‹¤.
     ì´ê²ƒì„ `Young generation` ë˜ëŠ” `Old generation` ê³µê°„ì— í• ë‹¹í•œë‹¤.
2ì°¨ì ìœ¼ë¡œ ê°ì²´ëŠ” ì´ˆê¸°ì— Yì„¸ëŒ€ì— í• ë‹¹ë˜ë©° GCì‹œì— Yì„¸ëŒ€ ë‚´ì—ì„œ í•œ ë²ˆ ì´ë™ ë˜ê³  
    ë‹¤ë¥¸ GCì—ì„œ ì‚´ì•„ë‚¨ì€ ê°œì²´ë“¤ì€ Oì„¸ëŒ€ë¡œ ìŠ¹ê²©ëœë‹¤.

ìœ„ì˜ 1,2ì°¨ë¥¼ Yì„¸ëŒ€ ì§‘í•©ì´ë¼ëŠ” í˜ì´ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë©”ëª¨ë¦¬ ë³µì‚¬ë¥¼ ë³‘ë ¬í™”í•˜ê³ 
Yì„¸ëŒ€ ë‚´ì—ì„œì˜ ê°œì²´ ì´ë™ì€ í•­ìƒ ìƒˆë¡œìš´ í˜ì´ì§€ì— ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹ ë° ì´ì „ í˜ì´ì§€ í•´ì œë¥¼ í•˜ë©°
ë©”ëª¨ë¦¬ ë ˆì´ì•„ì›ƒì„ ì••ì¶•í•œë‹¤.

ê·¸ë¦¬ê³  Oì„¸ëŒ€ì—ì„œëŠ” `ì£½ì€ ë©”ëª¨ë¦¬ ì°Œêº¼ê¸°ë¥¼ ë‚¨ê¸°`ê¸° ë•Œë¬¸ì— ì´ í”„ë¡œì„¸ìŠ¤ê°€ ì¡°ê¸ˆ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ë°œìƒí•œë‹¤.
ì°Œêº¼ê¸° ì¼ë¶€ëŠ” ì¼ë¶€ ì¬ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ì§€ë§Œ ë‚˜ë¨¸ì§€ëŠ” ìƒˆë¡œìš´ Yì„¸ëŒ€ ì§‘í•© í˜ì´ì§€ë¡œ ì´ë™í•˜ê¸° ìœ„í•´ ì••ì¶•ì„ ì§„í–‰í•œë‹¤.

ìœ„ì™€ ê°™ì´ Young generation, Old generetion ì••ì¶• ì‚¬ì´ì— ì¢…ì†ì„±ì´ ì—†ê¸° ë•Œë¬¸ì— ë³‘ë ¬ë¡œ ì²˜ë¦¬ ìˆ˜í–‰í•˜ë©° ì´ëŸ¬í•œ ê°œì„  ê²°ê³¼ ì••ì¶• ì‹œê°„ì´ ~7m/sì—ì„œ 2m/s ë¯¸ë§Œìœ¼ë¡œ 75% ê°ì†Œí–ˆë‹¤.

### 2. GC(Garbage Collaction) pointer ì¶”ì²™ ë°©ì‹ ê°œì„ 

ê°œì²´ê°€ í™ì—ì„œ ìœ„ì¹˜ë¥¼ ì´ë™í•˜ê²Œ ë˜ë©´ GCëŠ” ì´ë™ëœ ê°œì²´ì˜ ì´ì „ ìœ„ì¹˜ë¥¼ í¬í•¨í•˜ëŠ”
ëª¨ë“  í¬ì¸í„°(pointer)ë“¤ì„ ì°¾ì•„ ìƒˆë¡œìš´ ìœ„ì¹˜ë¡œ ì—…ë°ì´íŠ¸ í•´ì•¼ í•œë‹¤.
í¬ì¸í„°ë“¤ì„ ì°¾ê¸° ìœ„í•´ í™(heap)ì„ ë°˜ë³µí•˜ëŠ” ê²ƒì€ ì„±ëŠ¥ì„ ë§¤ìš° ë‚®ì¶”ê¸° ë•Œë¬¸ì—
V8ì€ ë©”ëª¨ë¦¬ ì§‘í•©ì´ë¼ëŠ” ë°ì´í„°êµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ì—¬ í™ì— ìˆëŠ” ëª¨ë“  í¬ì¸í„°ë“¤ì„ ì¶”ì í•œë‹¤.

> "í™ ë©”ëª¨ë¦¬"ëŠ” ì»¤ë‹¤ë€ ë†€ì´í„°ë¼ê³  ìƒê°í•´ë³´ì
> 
> 
> "í¬ì¸í„°"ë“¤ì€ ë†€ì´í„°ì— ìˆ¨ì€ ì¹œêµ¬ë“¤ì„ ì°¾ëŠ” ì§€ë„ì´ë‹¤.
> 
> ê·¼ë° ê°‘ìê¸° ì¹œêµ¬ê°€ ë†€ì´í„° ì•ˆì—ì„œ ìë¦¬ë¥¼ ì´ë™í–ˆë‹¤
> 
> ê·¸ëŸ¬ë©´ ì§€ë„(í¬ì¸í„°)ê°€ ê°€ë¦¬í‚¤ëŠ” ìœ„ì¹˜ë„ ë°”ê¿”ì–´ì•¼ í•  ê²ƒì´ë‹¤.
> 
> ë¬¸ì œëŠ”, ë†€ì´í„° ì „ì²´ë¥¼ ëŒì•„ë‹¤ë‹ˆë©´ì„œ "ì§€ë„ ì–´ë”” ìˆì§€?"ë¼ë©° ì°¾ìœ¼ë©´ **ì‹œê°„ì´ ì—„ì²­ ê±¸ë ¤ì„œ** í˜ë“¤ ê²ƒì´ë‹¤.
> 
> ê·¸ë˜ì„œ **V8 ì—”ì§„**ì€ "ë©”ëª¨ë¦¬ ì§‘í•©"ì´ë¼ëŠ” íŠ¹ë³„í•œ ëª…ë‹¨ì„ ë§Œë“¤ì–´ ë†“ê³ 
> ì´ ëª…ë‹¨ì—ëŠ” "ì¹œêµ¬(í¬ì¸í„°)ê°€ ì–´ë”” ì–´ë”” ìˆ¨ì–´ìˆë‹¤"ëŠ” ì •ë³´ê°€ **ë¯¸ë¦¬ ë‹¤ ì •ë¦¬**ë¼ ìˆë‹¤.
> 
> ê·¸ëŸ¬ë‹ˆê¹Œ, ëˆ„ê°€ ì´ë™í•˜ë©´,
> "ì–´ë””ì— ì¹œêµ¬ë“¤ì´ ìˆëŠ”ì§€" í˜ë“¤ê²Œ í—¤ë§¤ì§€ ì•Šê³  ë°”ë¡œ ì°¾ì•„ê°€ì„œ **ì§€ë„ë¥¼ ìˆ˜ì •**í•˜ëŠ” ê²ƒì´ë‹¤.
> 

ê¸°ì¡´ì—ëŠ” ì•„ë˜ì˜ ì‚¬ì§„ê³¼ ê°™ì´ pointer addressesë“¤ì„ arrays ë˜ëŠ” store buffersë“¤ë¡œ êµ¬í˜„í–ˆì—ˆë‹¤.

![image.png](./images/image%205.png)

ìœ„ì™€ ê°™ì´ í˜ì´ì§€(page) ì•ˆì—ëŠ” Yì„¸ëŒ€ë¥¼ ìœ„í•œ í•˜ë‚˜ì˜ Store Bufferì™€ 
Oì„¸ëŒ€ì˜ ì°Œêº¼ê¸°ê°€ ìˆëŠ” Store Bufferë“¤ì´ ìˆìŠµë‹ˆë‹¤.

Store Bufferì˜ ì €ì¥ í˜ì´ì§€ì—ëŠ” ê·¸ë¦¼ 4ì™€ ê°™ì´ ëª¨ë“  í¬ì¸í„°ë“¤ì˜ ì£¼ì†Œê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ë°
ì´ì™€ ê°™ì´ ì•„í‚¤í…ì²˜ë¥¼ ì„¤ê³„í–ˆì„ ë•Œ store bufferê°€ í¬ì¸í„°ë¥¼ ì—¬ëŸ¬ ë²ˆ í¬í•¨í•  ìˆ˜ ìˆê³ 
ë‘ ê°œì˜ ì„œë¡œ ë‹¤ì€ store bufferê°€ ë™ì¼í•œ í¬ì¸í„°ë¥¼ í¬í•¨í•  ìˆ˜ ìˆê¸° ë•Œë¬´ì— ì¤‘ë³µë  ìˆ˜ ìˆëŠ” ì´ìŠˆê°€ ìˆì—ˆë‹¤.
ì´ ì´ìŠˆëŠ” ë™ì¼í•œ í¬ì¸í„°ë¥¼ ì—…ë°ì´íŠ¸í•˜ë ¤ëŠ” ë‘ threadsë¡œ ì¸í•´ ë°œí–‰í•˜ëŠ” ê²½í•©ìœ¼ë¡œ
í¬ì¸í„° ì—…ë°ì´íŠ¸ ë‹¨ê³„ì—ì„œ ë³‘ë ¬í™”ë¥¼ ì–´ë µê²Œ ë§Œë“œëŠ” ìƒí™©ì´ì—ˆë‹¤.

ìœ„ì™€ ê°™ì€ ì´ìŠˆë¥¼ í•´ê²°í•˜ê³ ì ì•„ë˜ ê·¸ë¦¼5ì™€ ê°™ì´ 

![image.png](./images/image%206.png)

OrinocoëŠ” page ì„¸íŠ¸ë“¤ì„ ì¬êµ¬ì„±í•˜ì—¬ ë³‘ë ¬í™”ë¥¼ ë‹¨ìˆœí™”í•˜ê³ 
threadê°€ ì—…ë°ì´íŠ¸í•  ë¶„ë¦¬ëœ í¬ì¸í„° ì„¸íŠ¸ë¥¼ ì–»ë„ë¡ í•¨ìœ¼ë¡œì„œ ì´ëŸ¬í•œ ë³µì¡ì„±ì„ ì œê±°í•¨ìœ¼ë¡œ
GC ìµœëŒ€ ì¼ì‹œ ì¤‘ì§€ ì‹œê°„ì´ 42m/sì—ì„œ 23m/së¡œ 45% ê°ì†Œ í–ˆë‹¤.

### 3. GCì˜ ë§ˆí‚¹ ë‹¨ê³„ë¥¼ ê°œì„ 

ë§ˆì§€ë§‰ ë‹¨ê³„ëŠ” `Black allocation`ì´ë¼ëŠ” GCì˜ ë§ˆí‚¹ ë‹¨ê³„ë¥¼ ê°œì„ í•œë‹¤.

V8 5.1ë¶€í„° ì œê³µí•˜ê²Œ ë˜ì—ˆê³  ê¸°ì¡´ ì„¸ëŒ€ì¸ `Mark-Sweep-Compact`ëŠ” ë©”ëª¨ë¦¬ ì‚¬ìš©ì— ì¢‹ì§€ ì•Šì•„ 
ì´ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ `Tri-color Mark-Sweep`ë¥¼ ì ìš©í•˜ê²Œ ë˜ì—ˆë‹¤.

ë‚´ìš©ì„ ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ë©´ í™œì„±í™”/ë¹„í™œì„±í™” 2ë‹¨ê³„ì—ì„œ 3ë‹¨ê³„ë¡œ ëŠ˜ì–´ë‚¬ë‹¤ê³  ì´í•´í•˜ë©´ ì¢‹ë‹¤

**3-1) `mark-and-sweep`**

![image.png](./images/image%207.png)

ìœ„ì™€ ê°™ì´ mark-and-sweepëŠ” ìˆ˜ì§‘ ì£¼ê¸° ë™ì•ˆì„ ì œì™¸í•˜ê³ ëŠ” í•­ìƒ ì§€ì›Œì§„ë‹¤.

- ì²« ë²ˆì§¸ ë‹¨ê³„ëŠ” mark stageë¡œ root setì˜ treeë“¤ì„ ìˆœíšŒí•˜ê³  rootì—ì„œ ìš”ì²­í•œ ê°ì²´ë¥¼ `ì‚¬ìš©ì¤‘ìœ¼ë¡œ í‘œì‹œ`í•˜ëŠ” ë‹¨ê³„ì´ë‹¤
- ë‘ ë²ˆì§¸ ë‹¨ê³„ì—ì„œëŠ” sweep stageë¡œ ëª¨ë“  ë©”ëª¨ë¦¬ë¥¼ ì²˜ìŒë¶€í„° ëê¹Œì§€ ìŠ¤ìº”í•˜ì—¬ ì‚¬ìš© ì‚¬ëŠ¥í•œ ëª¨ë“  ë¸”ë¡ ë– ëŠ” ì‚¬ìš©ëœ ë¸”ë¡ì„ ê²€ì‚¬í•œë‹¤.

ì‚¬ìš©ì¤‘ìœ¼ë¡œ í‘œì‹œë˜ì§€ ì•Šì€ í•­ëª©ì€ ë©”ëª¨ë¦¬ì—ì„œ í•´ì œë˜ë©°,
ì‚¬ìš©ì¤‘ìœ¼ë¡œ í‘œì‹œëœ ê°œì²´ì˜ ê²½ìš° ì‚¬ìš©ì¤‘ í”Œë˜ê·¸ê°€ ì§€ì›Œì§€ë©° ë‹¤ìŒ ì£¼ê¸°ë¥¼ ì¤€ë¹„í•œë‹¤.

mark-and-sweepì˜ ë°©ë²•ì€ ìˆ˜ì§‘ ì¤‘ì— ì „ì²´ ì‹œìŠ¤í…œì„ ì¼ì‹œì ìœ¼ë¡œ ì¤‘ë‹¨í•˜ëŠ” í¬ë¦¬íŠ¸ì»¬í•œ ì´ìŠˆê°€ ìˆê³ 
ì‹œê¸°ë¥¼ ì¼ë°˜ì ìœ¼ë¡œ ì˜ˆì¸¡í•  ìˆ˜ ì—†ê²Œ ì •ì§€ë˜ì–´ ì¼ë¶€ ì‹¤ì‹œê°„ì´ë‚˜ ì‹œê°„ì´ ì¤‘ìš”í•œ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ê²½ìš° ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥ í•´ì§ˆ ìˆ˜ ìˆë‹¤.

ë˜í•œ ì „ì²´ ì‘ì—… ë©”ëª¨ë¦¬ë¥¼ ë‘ ë²ˆ ê²€ì‚¬í•´ì•¼ í•˜ë¯€ë¡œ ì ì¬ì ì¸ `Memory paging` ì‹œìŠ¤í…œì— ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì´ìŠˆë¥¼ ê°€ì§€ê³  ìˆë‹¤.

---

**3-2) `Black alloction`**

- ì²« ë²ˆì§¸ ë‹¨ê³„ëŠ” `í°ìƒ‰`ìœ¼ë¡œ í‘œê¸°ë˜ë©° ê°œì²´ì˜ ì´ˆê¸° ìƒíƒœë¥¼ ì˜ë¯¸
ì´ˆê¸° ë‹¨ê³„ëŠ” ë©”ëª¨ë¦¬ë¥¼ ì¬í™œìš©í•  í›„ë³´ì¸ ê°œì²´ ì§‘í•©ì´ë¼ê³  ì´í•´í•˜ì
- ë‘ ë²ˆì§¸ ë‹¨ê³„ëŠ” `íšŒìƒ‰`ìœ¼ë¡œ ê°œì²´ê°€ `root set`ì—ì„œ ë„ë‹¬í•  ìˆ˜ ìˆê³  ê²€ì‚¬ë¥¼ ë°›ê±°ë‚˜ ê²€ì‚¬ì¤‘ì¸ ìƒíƒœì´ë‹¤
ì¦‰, root setì— ë„ë‹¬í•  ìˆ˜ ìˆì§€ë§Œ â€œí°ìƒ‰â€ ê°œì²´ì— ëŒ€í•œ ì°¸ì¡°ë£° ìœ„í•´ ì•„ì§ ìŠ¤ìº”ë˜ì§€ ì•Šì€ ëª¨ë“  ê°œì²´ê°€ í¬í•¨ëœë‹¤.
root setì— ë„ë‹¬í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ GCì´ ë¶ˆì‚¬ëŠ¥í•˜ê³  ìŠ¤ìº” í›„ `ë¸”ë™`ì— ë‚¨ê²Œ ëœë‹¤.
- ì„¸ ë²ˆì§¸ ë‹¨ê³„ëŠ” `ë¸”ë™`ìœ¼ë¡œ í‘œê¸°ë˜ë©´ ê°œì²´ ê²€ì‚¬ê°€ ì™„ë£Œëœ í‘œì‹œì´ë‹¤.

![image.png](./images/image%208.png)

ìœ„ì˜ ê·¸ë¦¼ì„ í†µí•´ ì•Œê³ ë¦¬ì¦˜ì  ë¡œì§ì„ í™•ì¸í•´ë³´ì

1. íšŒìƒ‰ ì„¸íŠ¸ì—ì„œ ê°œì²´ë¥¼ ì„ íƒí•˜ê³  ë¸”ë™ì„¸íŠ¸ë¡œ ì´ë™ì„ í•œë‹¤.
2. íšŒìƒ‰ ì„¸íŠ¸ë¥¼ ì°¸ì¡°í•˜ëŠ” ê° íšìƒ‰ ê°œì²´ë¥¼ ì´ë™í•œë‹¤.
ì´ë ‡ê²Œ í•˜ë©´ ì´ ê°œì²´ë‚˜ ì°¸ì¡°í•˜ëŠ” ê°œì²´ê°€ ëª¨ë‘ CGë  ìˆ˜ ì—†ë‹¤.
3. íšŒìƒ‰ ì„¸íŠ¸ê°€ ë¹„ì›Œì§ˆ ë•Œê¹Œì§€ ë§ˆì§€ë§‰ ë‘ ë‹¨ê³„ë¥¼ ë°˜ë³µí•œë‹¤.
íšŒìƒ‰ ì„¸íŠ¸ê°€ ë¹„ì–´ ìˆìœ¼ë©´ ìŠ¤ìº”ì´ ì™„ë£Œëœ ê²ƒì´ë‹¤
ë¸”ë™ ê°œì²´ëŠ” root setì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë°˜ë©´ì— í°ìƒ‰ ê°œì²´ëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ê³  GCê°€ ê°€ëŠ¥í•˜ë‹¤.

ì¦‰, root setì—ì„œ ì¦‰ì‹œ ë„ë‹¬í•  ìˆ˜ ì—†ëŠ” ëª¨ë“  ê°œì²´ê°€ í°ìƒ‰ ì„¸íŠ¸ì— ì¶”ê°€ë˜ê³  ê°œì²´ê°€ í°ìƒ‰ â†’ íšŒìƒ‰
íšŒìƒ‰ â†’ ë¸”ë™ìœ¼ë¡œë§Œ ì´ë™í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì•Œê³ ë¦¬ì¦˜ì€ ì¤‘ìš”í•œ ë¶ˆë³€ì„±ì„ ìœ ì§€í•˜ëŠ” ì¥ì ì„ ê°€ì§€ê³  ìˆë‹¤.
íŠ¹íˆ, `ë¸”ë™ ê°œì²´ëŠ” í°ìƒ‰ ê°œì²´ë¥¼ ì°¸ì¡°í•˜ì§€ ì•ŠëŠ”ë‹¤`
ì´ë ‡ê²Œ í•˜ë©´ íšŒìƒ‰ ì„¸íŠ¸ê°€ ë¹„ì–´ ìˆìœ¼ë©´ í°ìƒ‰ ê°œì²´ë¥¼ í•´ì œí•  ìˆ˜ ìˆë‹¤.

ìœ„ì— mark-and-sweepì—ì„œëŠ” ì‹œìŠ¤í…œì„ ì¤‘ë‹¨í•´ì•¼ í•˜ëŠ” ì´ìŠˆê°€ ìˆì—ˆëŠ”ë°
Black allocation(Tri-color marking) ë„ì…ìœ¼ë¡œ ìƒë‹¹í•œ ì‹œê°„ ë™ì•ˆ ì‹œìŠ¤í…œì„ ì¤‘ë‹¨í•˜ì§€ ì•Šê³ 
ì¦‰ì„ì—ì„œ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤ëŠ” ë¶€ë¶„ì´ ì‹œìŠ¤í…œì—ì„œ í•„ìš”ì— ë”°ë¼ê°€ ì•„ë‹ˆë¼ ì£¼ê¸°ì ìœ¼ë¡œ GCë¥¼ ì§„í–‰í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìƒê²¼ê³  ë˜í•œ ì´ë¥¼ ë™í•´ V8ì¤‘ë‹¨ ì´ìŠˆë¥¼ í•´ê²°í–ˆë‹¤.

### GCê°€ ìˆëŠ” ê²ƒì´ ë¬´ì¡°ê±´ ì¢‹ì„ê¹Œ?

**GCì˜ ì¥ì :**

- ê°œë°œìê°€ ë©”ëª¨ë¦¬ ì§ì ‘ ê´€ë¦¬ ì•ˆ í•´ë„ ë¨
- ë©”ëª¨ë¦¬ ëˆ„ìˆ˜, ë²„ê·¸, ë»—ëŠ” ë¬¸ì œë¥¼ ì¤„ì—¬ì¤Œ
- ì‹¤ìˆ˜í•´ë„ ì–´ëŠ ì •ë„ëŠ” ë³µêµ¬í•´ì¤Œ
- í”„ë¡œë•ì…˜(ì‹¤ì œ ì„œë¹„ìŠ¤) í™˜ê²½ì—ì„œ ì•ˆì •ì„±ì´ ì˜¬ë¼ê°

**GCì˜ ë‹¨ì :**

- **GC íƒ€ì´ë°**ì€ ì™„ë²½í•˜ê²Œ ì œì–´í•  ìˆ˜ ì—†ì–´
    
    (ì–¸ì œ GC ëˆë‹¤ê³  ë”± ëª» ì°ìŒ)
    
- **GC ë„ëŠ” ë™ì•ˆ ì‚´ì§ ì„±ëŠ¥ ì €í•˜**ê°€ ìˆì„ ìˆ˜ ìˆìŒ
- *ë¦¬ì†ŒìŠ¤ ë§ì´ ì“°ëŠ” ì•±(ê²Œì„, ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ ë“±)**ì€ ì˜¤íˆë ¤ ê°œë°œìê°€ ìˆ˜ë™ìœ¼ë¡œ ë©”ëª¨ë¦¬ ê´€ë¦¬í•˜ëŠ” ê²Œ ë‚˜ì„ ë•Œë„ ìˆìŒ

**ë‚´ ìƒê°(ê°œë°œìê°€ ì‹ ê²½ ì•ˆ ì“°ê³ ë„ ì¢‹ì€ ì„±ëŠ¥ ë‚˜ë©´ ì¢‹ë‹¤)**

> í˜„ëŒ€ ëŒ€ë¶€ë¶„ì˜ ì›¹, ì„œë²„ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€
> 
> 
> GC ìˆëŠ” ê²Œ **í›¨ì”¬ ì´ë“**ì´ì•¼.
> 
> (ìš°ë¦¬ê°€ êµ³ì´ ë©”ëª¨ë¦¬ ì§ì ‘ ê´€ë¦¬í•  í•„ìš” ì—†ì´, ì¢‹ì€ ì„±ëŠ¥ ìœ ì§€í•˜ë©´ì„œ, ë¹ ë¥´ê²Œ ê°œë°œí•  ìˆ˜ ìˆìœ¼ë‹ˆê¹Œ.)
> 

ì •ë¦¬ í•œ ì¤„ ìš”ì•½:

> "GCëŠ” ë¬´ì¡°ê±´ ì¢‹ì€ ê±´ ì•„ë‹ˆì§€ë§Œ,
> 
> 
> **í˜„ëŒ€ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì—ì„œëŠ” ê±°ì˜ í•„ìˆ˜ ê°™ì€ ì¡´ì¬**ë‹¤."
> 

ì•„ë˜ì™€ ê°™ì€ ë°©ë²•ë“¤ë„ ìˆë‹¤

- Node.jsì—ì„œ GC ìˆ˜ë™ íŠ¸ë¦¬ê±°í•˜ëŠ” ë°©ë²•
- V8 GC ìµœì í™” ë°©ë²•

# ì „ì²´ ìš”ì•½

- ëˆŒëŸ¬ì„œ í™•ì¸
    
    ## 1. V8 ì—”ì§„ì´ ë­”ë°?
    
    - **êµ¬ê¸€ì´ ë§Œë“  ì´ˆê³ ì† JS + WebAssembly ì—”ì§„**ì´ì•¼.
    - **C++ë¡œ ê°œë°œ**ëê³ , **Chrome ë¸Œë¼ìš°ì €**ë‘ **Node.js**ì—ì„œ ëŒì•„ê°€.
    - **JIT(Just-In-Time) ì»´íŒŒì¼**ì„ ì¨ì„œ **JSë¥¼ ë°”ë¡œ ê¸°ê³„ì–´ë¡œ ë°”ê¿”ì„œ** ë¹ ë¥´ê²Œ ì‹¤í–‰ì‹œì¼œì¤˜.
    - ì‹œì‘ì€ **ì¸í„°í”„ë¦¬í„°(í•œ ì¤„ì”© í•´ì„)** ë°©ì‹ìœ¼ë¡œ í•˜ê³ ,
        - *ìì£¼ ì“°ì´ëŠ” ì½”ë“œëŠ” JIT ì»´íŒŒì¼ëŸ¬(TurboFan)**ë¡œ ë‹¤ì‹œ ìµœì í™”í•´ì„œ ì´ˆê³ ì† ì‹¤í–‰!
    
    > âœ… ìš”ì•½:
    > 
    > 
    > ì¸í„°í”„ë¦¬í„°ì²˜ëŸ¼ ë¹ ë¥´ê²Œ ì‹œì‘ + ì»´íŒŒì¼ëŸ¬ì²˜ëŸ¼ ë¹ ë¥´ê²Œ ìµœì í™” = V8 ë¯¸ì³¤ë‹¤.
    > 
    
    ---
    
    ## 2. ì»´íŒŒì¼(Compile) vs ì¸í„°í”„ë¦¬íŠ¸(Interpret)
    
    | êµ¬ë¶„ | ì¸í„°í”„ë¦¬íŠ¸(Interpret) | ì»´íŒŒì¼(Compile) |
    | --- | --- | --- |
    | ë²ˆì—­ ë°©ì‹ | í•œ ì¤„ì”© ì½ì–´ì„œ ë°”ë¡œ ì‹¤í–‰ | ì „ì²´ë¥¼ ë‹¤ ì½ê³  ê¸°ê³„ì–´ë¡œ ë°”ê¾¼ í›„ ì‹¤í–‰ |
    | ì¥ì  | ë¹ ë¥¸ ì‹œì‘ | ë¹ ë¥´ê³  ìµœì í™”ëœ ì‹¤í–‰ |
    | ë‹¨ì  | ëŠë¦´ ìˆ˜ ìˆìŒ | ì²˜ìŒì— ëŠë¦¼ |
    | ì˜ˆì‹œ ì–¸ì–´ | JS, Python | C, C++, Java |
    
    > âœ… V8ì€ ë‘˜ ë‹¤ ì“´ë‹¤. (ì‹œì‘ì€ ì¸í„°í”„ë¦¬íŠ¸ â†’ ìµœì í™”ëŠ” ì»´íŒŒì¼)
    > 
    
    ---
    
    ## 3. V8 ì—”ì§„ ì‘ë™ íë¦„ (Flow)
    
    1. **JS ì½”ë“œ ì‘ì„±**
    2. **Parser**ê°€ ì½”ë“œë¥¼ ì½ê³  **AST(ì¶”ìƒ êµ¬ë¬¸ íŠ¸ë¦¬)**ë¡œ ë°”ê¿”
    3. **Ignition ì¸í„°í”„ë¦¬í„°**ê°€ ASTë¥¼ **ByteCode**ë¡œ ë³€í™˜
    4. **ByteCode**ë¥¼ ì‹¤í–‰
    5. ìì£¼ ì“°ëŠ” ì½”ë“œ ë°œê²¬í•˜ë©´ â†’ **TurboFan**ì´ **ìµœì í™”ëœ ë¨¸ì‹  ì½”ë“œ**ë¡œ ì»´íŒŒì¼
    6. ë¹ ë¥´ê²Œ ì‹¤í–‰!
    
    > âœ… ë°”ì´íŠ¸ì½”ë“œ â†’ ìµœì í™”ëœ ë¨¸ì‹ ì½”ë“œ â†’ JIT ë•ë¶„ì— ë¹ ë¥´ë‹¤.
    > 
    
    ---
    
    ## 4. V8ì˜ í™ ë©”ëª¨ë¦¬ ê´€ë¦¬ì™€ GC (Garbage Collection)
    
    - **V8 ì—”ì§„ì€ ë©”ëª¨ë¦¬ ê´€ë¦¬ë„ ì•Œì•„ì„œ í•´ì¤Œ** (ìš°ë¦¬ê°€ ì‹ ê²½ ì•ˆ ì¨ë„ ë¨!)
    - **í™(Heap)**: ê°ì²´ë“¤ì´ ì‚´ì•„ ìˆëŠ” ê³µê°„
    - **GC**: ì“°ì§€ ì•ŠëŠ” ê°ì²´ë¥¼ ì°¾ì•„ì„œ ë©”ëª¨ë¦¬ë¥¼ í•´ì œí•˜ëŠ” ì‹œìŠ¤í…œ
    
    V8ì˜ **í™ êµ¬ì¡°**:
    
    - **New Space (Young Generation)**: ìƒˆë¡œ ë§Œë“¤ì–´ì§„ ì• ë“¤
    - **Old Space (Old Generation)**: ì˜¤ë˜ ì‚´ì•„ë‚¨ì€ ì• ë“¤
    - (í° ë©ì¹˜ â†’ Large Object Space, ì½”ë“œ ì €ì¥ìš© â†’ Code Spaceë„ ìˆìŒ)
    
    ## 5. V8 GC ìµœì í™”
    
    V8ì€ ê³¼ê±°ì— GCí•  ë•Œ
    
    **í™ ì „ì²´ë¥¼ ëŒë©´ì„œ í¬ì¸í„° ì—…ë°ì´íŠ¸** â†’ **ê°œë¹¡ì„¸ê³  ë²„ë²…ê±°ë¦¼** ğŸ˜µâ€ğŸ’«
    
    ê·¸ë˜ì„œ `Orinoco í”„ë¡œì íŠ¸`ë¡œ 3ê°€ì§€ ìµœì í™” í–ˆì–´:
    
    ### (1) í™ í˜ì´ì§€ ë¶„ë¦¬
    
    - ê³ ì • í¬ê¸° ë©ì–´ë¦¬(Page)ë¡œ ìª¼ê°¬
    - ìƒˆ ê°ì²´ â†’ New Spaceì—
    - ì‚´ì•„ë‚¨ìœ¼ë©´ â†’ Old Spaceë¡œ ìŠ¹ê²©
    - ë³‘ë ¬ë¡œ ë³µì‚¬í•˜ë©´ì„œ ë©”ëª¨ë¦¬ ì •ë¦¬ = **GC ì‹œê°„ 75% ê°ì†Œ**
    
    ### (2) í¬ì¸í„° ì¶”ì  ê°œì„ 
    
    - "ë©”ëª¨ë¦¬ ì§‘í•©(Remembered Set)"ì„ ì¨ì„œ
    - ì–´ë””ì— í¬ì¸í„°ê°€ ìˆëŠ”ì§€ ë¯¸ë¦¬ ê¸°ë¡
    - ì´ë™í•  ë•Œë§Œ ë”± ì°¾ì•„ì„œ ì—…ë°ì´íŠ¸ = **ì†ë„ ê°œë¹ ë¦„**
    
    ### (3) GC ë§ˆí‚¹ ìµœì í™” (Black Allocation)
    
    - `Tri-color Marking (í°ìƒ‰/íšŒìƒ‰/ê²€ì€ìƒ‰)` ì ìš©
    - í°ìƒ‰: ì£½ì€ ì• ë“¤ í›„ë³´
    - íšŒìƒ‰: ì²´í¬í•´ì•¼ í•  ì• ë“¤
    - ê²€ì€ìƒ‰: ì‚´ì•„ìˆëŠ” ì• ë“¤
    - â†’ **ëŠì„ì—†ì´ GCë¥¼ ëŒë¦¬ë©´ì„œë„ ì‹œìŠ¤í…œì„ ë©ˆì¶”ì§€ ì•ŠìŒ**
        
        (ì‹¤ì‹œê°„ ì‹œìŠ¤í…œì—ë„ ë¬¸ì œ ì—†ìŒ!)
        
    
    ---
    
    # ğŸ”¥ í•µì‹¬ ì§„ì§œ ìš”ì•½
    
    > V8ì€ ì¸í„°í”„ë¦¬íŠ¸ + JIT ì»´íŒŒì¼ëŸ¬ ì½¤ë³´ë¡œ ë¹ ë¦„GCëŠ” í™ ë©”ëª¨ë¦¬ë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ì²­ì†Œí•¨Orinocoë¡œ GC ë³‘ë ¬í™” + ìµœì í™”í•´ì„œ ë²„ë²…ì„ ê±°ì˜ ì—†ìŒ
    > 
    
    ---
    
    # ğŸ“£ ê·¸ëŸ¼ **GCê°€ ë¬´ì¡°ê±´ ì¢‹ì€ ê±°ì•¼?** ì— ëŒ€í•œ ë‚´ ëŒ€ë‹µ
    
    **ì•„ë‹ˆì•¼. ë¬´ì¡°ê±´ ì¢‹ì€ ê±´ ì•„ë‹˜.** (í•˜ì§€ë§Œ ëŒ€ì²´ë¡œ "ì¢‹ì€ ê±°" ë§ì•„.)
    
    ğŸ§  **GCì˜ ì¥ì :**
    
    - ê°œë°œìê°€ ë©”ëª¨ë¦¬ ì§ì ‘ ê´€ë¦¬ ì•ˆ í•´ë„ ë¨ (ê°œê¿€)
    - ë©”ëª¨ë¦¬ ëˆ„ìˆ˜, ë²„ê·¸, ë»—ëŠ” ë¬¸ì œë¥¼ ì¤„ì—¬ì¤Œ
    - ì‹¤ìˆ˜í•´ë„ ì–´ëŠ ì •ë„ëŠ” ë³µêµ¬í•´ì¤Œ
    - í”„ë¡œë•ì…˜(ì‹¤ì œ ì„œë¹„ìŠ¤) í™˜ê²½ì—ì„œ ì•ˆì •ì„±ì´ ì˜¬ë¼ê°
    
    âš ï¸ **GCì˜ ë‹¨ì :**
    
    - **GC íƒ€ì´ë°**ì€ ì™„ë²½í•˜ê²Œ ì œì–´í•  ìˆ˜ ì—†ì–´
        
        (ì–¸ì œ GC ëˆë‹¤ê³  ë”± ëª» ì°ìŒ)
        
    - **GC ë„ëŠ” ë™ì•ˆ ì‚´ì§ ì„±ëŠ¥ ì €í•˜**ê°€ ìˆì„ ìˆ˜ ìˆìŒ
    - *ë¦¬ì†ŒìŠ¤ ë§ì´ ì“°ëŠ” ì•±(ê²Œì„, ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ ë“±)**ì€ ì˜¤íˆë ¤ ê°œë°œìê°€ ìˆ˜ë™ìœ¼ë¡œ ë©”ëª¨ë¦¬ ê´€ë¦¬í•˜ëŠ” ê²Œ ë‚˜ì„ ë•Œë„ ìˆìŒ
    
    ğŸŒŸ **ë„¤ ìƒê°(ê°œë°œìê°€ ì‹ ê²½ ì•ˆ ì“°ê³ ë„ ì¢‹ì€ ì„±ëŠ¥ ë‚˜ë©´ ì¢‹ë‹¤)**
    
    ===> **ì™„ì „íˆ ë§ëŠ” ë°©í–¥ì´ì•¼!**
    
    > í˜„ëŒ€ ëŒ€ë¶€ë¶„ì˜ ì›¹, ì„œë²„ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€
    > 
    > 
    > GC ìˆëŠ” ê²Œ **í›¨ì”¬ ì´ë“**ì´ì•¼.
    > 
    > (ìš°ë¦¬ê°€ êµ³ì´ ë©”ëª¨ë¦¬ ì§ì ‘ ê´€ë¦¬í•  í•„ìš” ì—†ì´, ì¢‹ì€ ì„±ëŠ¥ ìœ ì§€í•˜ë©´ì„œ, ë¹ ë¥´ê²Œ ê°œë°œí•  ìˆ˜ ìˆìœ¼ë‹ˆê¹Œ.)
    > 
    
    ì •ë¦¬ í•œ ì¤„ ìš”ì•½:
    
    > "GCëŠ” ë¬´ì¡°ê±´ ì¢‹ì€ ê±´ ì•„ë‹ˆì§€ë§Œ,
    > 
    > 
    > **í˜„ëŒ€ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì—ì„œëŠ” ê±°ì˜ í•„ìˆ˜ ê°™ì€ ì¡´ì¬**ë‹¤."
    > 
    
    ---
    
    # âœ¨ ì¶”ê°€ë¡œ
    
    GCëŠ” "ì™„ì „ ë¯¿ê³  ë§¡ê¸°ëŠ” ê±°"ëŠ” ì•„ë‹ˆê³ ,
    
    **ë©”ëª¨ë¦¬ ëˆ„ìˆ˜(Leak)** ê°™ì€ ê±´ ìš°ë¦¬ê°€ ì§ì ‘
    

# Reference

[[ Node.js #03 V8 ì•„í‚¤í…ì²˜ ] Garbage Collection](https://artistdata.tistory.com/14?category=1182216)
